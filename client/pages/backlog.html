<template name="backlog">
    {{> backlogInput}} {{> backlogStories}}
</template>

<template name="backlogStories">
    <div id="container">
        {{#each backlogItems}}
        <div class="story" id={{_id}}>
            <p class="storyTitle" ref="name" data-type="text">{{name}}</p>
            <p class="storyType" ref="type" data-type="text">{{type}}</p>
            <p class="storyText" ref="description" data-type="textarea">{{description}}</p>
            <p class="storyHours" ref="time" data-type="text">{{time}}</p>
            <p class="storyAssignee" ref="assignee" data-type="text">Przydzielone do: {{assignee}}</p>
            <div>
                <details>
                    <summary>Zadania</summary>
                    {{#each tasks _id}}
                    <div class="task" id={{_id}}>
                        <p class="taskTitle" ref="name" data-type="text">{{name}}</p>
                        <p class="taskHours" ref="time" data-type="text" data-mode="popup">{{time}}</p>
                        <p class="taskText" ref="description" data-type="textarea">{{description}}</p>
                        <p class="taskAssignee" ref="assignee" data-type="text">Przydzielone do: {{assignee}}</p>
                    </div>
                    {{/each}}
                    <details class="addTask">
                        <summary>Dodaj nowe zadanie</summary>
                        <input type="text" class="tName" style="width: 95%" placeholder="Nazwa" />
                        <br/>
                        <input type="text" class="tDescription" style="width: 95%" placeholder="Opis" />
                        <br/>Szacowany czas:
                        <input type="number" class="tTime" style="width: 10%" />
                        <br/>Przydzielone do:
                        <select class="tAssigneeSelector" style="width: 30%">{{> backlogAssignees}}</select>
                        <input type="button" class="insertTask" value="Dodaj" style="float: right" />
                    </details>
                </details>
            </div>
        </div>
        {{/each}}
    </div>
</template>

<template name="backlogInput">
    <details class="addStory">
        <summary>Dodaj nowy element</summary>
        <input type="text" id="name" style="width: 95%" placeholder="Nazwa" />
        <br/>
        <input type="text" id="description" style="width: 95%" placeholder="Opis" />
        <br/>Szacowany czas:
        <input type="number" id="time" style="width: 5%" />
        <br/>Typ zadania:
        <select id="typeSelector" style="width: 20%">
            <option value="feature">Feature</option>
            <option value="bug">Bug</option>
            <option value="spike">Spike</option>
            <option value="other">Inny</option>
        </select>
        <br/>Przydzielone do:
        <select id="assigneeSelector" style="width: 20%">{{> backlogAssignees}}</select>
        <input type="button" class="insert" value="Dodaj" style="float: right" />
    </details>
</template>

<template name="backlogAssignees">
    <option value="0">Brak przydzia≈Çu</option>
    {{#each assignees}}
    <option value={{_id}}>{{name}}</option>
    {{/each}}
</template>