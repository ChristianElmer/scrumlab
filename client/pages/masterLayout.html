<template name="masterLayout">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="navbar-right">

                        {{#if currentUser}} {{> masterLayoutConnected}} {{else}} {{#if loggingIn}} {{> masterLayoutLoadingForm}} {{else}} {{> masterLayoutLoginForm}} {{/if}} {{/if}}

                    </div>

                    <div class="container-fluid ">
                        <!-- Brand and toggle get grouped for better mobile display -->
                        <div class="navbar-header ">
                            <button type="button " class="navbar-toggle " data-toggle="collapse " data-target="#navbar-collapse ">
                                <span class="sr-only ">Toggle navigation</span>
                                <span class="icon-bar "></span>
                                <span class="icon-bar "></span>
                                <span class="icon-bar "></span>
                            </button>

                            <a class="navbar-brand" href="#">Scrumlab</a>
                        </div>

                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse" id="navbar-collapse">
                            <ul class="nav navbar-nav">
                                <li class="{{ isActiveRoute 'dashboard' }}">
                                    <a href="{{ pathFor 'dashboard' }}" class="glyphicon glyphicon-home"></a>
                                </li>
                                <li class="dropdown">
                                    {{> navProjectsDropdown}}
                                </li>

                                {{#if isActiveRoute 'project' }}
                                <li class="{{ isActiveRoute 'projectDashboard' gitlabId=project.gitlab.id }}">
                                    <a href="{{ pathFor 'project' gitlabId=project.gitlab.id }}">Overview</a>
                                </li>

                                <li class="{{ isActiveRoute 'projectBacklog' }}">
                                    <a href="{{ pathFor 'projectBacklog' gitlabId=project.gitlab.id }}">Backlog</a>
                                </li>
                                <li class="{{ isActiveRoute 'projectSprints' }}">
                                    <a href="{{ pathFor 'projectSprints' gitlabId=project.gitlab.id }}">Sprints</a>
                                </li>
                                {{else}}
                                <li class="{{ isActiveRoute 'about' }}">
                                    <a href="{{ pathFor 'about' }}">About</a>
                                </li>
                                <li class="{{ isActiveRoute 'backlog' }}">
                                    <a href="{{ pathFor 'backlog' }}">Backlog test</a>
                                </li>
                                <li class="{{ isActiveRoute 'sprints' }}">
                                    <a href="{{ pathFor 'sprints' }}">Sprints test</a>
                                </li>
                                {{/if}}
                            </ul>
                        </div>
                    </div>
                </nav>

            </div>
        </div>
        <div class="row ">
            <div class="col-md-12 ">
                {{> yield}}
            </div>
        </div>
    </div>
</template>

<template name="masterLayoutLoginForm">
    <p>
        <div class="row">
            <div>
                <div class="col-xs-5 ">
                    <input class="form-control input-sm" id="iEmail" type="email" placeholder="Enter email ">
                </div>
                <div class="col-xs-4 ">
                    <input type="password" class="form-control input-sm" id="inputPassword3" placeholder="Password">
                </div>
                <div>
                    <div class="col-xs-2 ">
                        <button type="button" class="btn btn-primary btn-sm" id="signIn">Sign In</button>
                    </div>
                </div>
            </div>
        </div>
    </p>
</template>

<template name="masterLayoutLoadingForm">
    <p>
        <div class="pull-left"><b>Logging in...</b>
        </div>
    </p>
</template>

<template name="masterLayoutConnected">
    <div class="center-block">
        <p class="text-info">
            <b>Hi, {{currentUser.username}}</b>
            <button type="submit" class="btn btn-primary btn-sm col-xs-5" id="iLogout">Sign out</button>
        </p>
    </div>
</template>
